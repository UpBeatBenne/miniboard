#!/usr/bin/env node
/**
 * Name: mod.d/core/manifest.o
 * Created: 8 June 2021 @ 16:40 BST (15:40 GMT)
 * Author: Daniel Hyders <git@bean.codes>
 * Licence: GNU GPLv3
*/

// CommonJS and ESM modules are supported.

import path from "path";
import { importModule } from "../lib/import.o";

const schema = {
    schemaVer: "1.1.0",
    name: "Lightbox Core Runtime",
    version: "3.0.0",
    creators: {
        author: {
            name: "Lightbox Core Maintainers <lightbox@services.bean.codes>",
            email: "lightbox@services.bean.codes",
            website: "https://github.com/Dannnington/miniboard"
        },
        contributors: [
            {
                name: "Daniel Hyders",
                email: "git@bean.codes",
                website: "https://www.bean.codes"
            }
        ]
    },
    package: path.join(__dirname + "/package.json"),
    autoRun: true,
    runtime: async function () {
        await importModule("database");
        if (process.versions["electron"]) {
            require(path.join(__dirname + "/src/electron.o"));
        } if (!process.versions["electron"]) {
            require(path.join(__dirname + "/src/node.o"));
        };
    }
};

export default schema;